<!-- If user is already in group, user can only leave group-->
{% if(group.isInGroup(app.user.profile)) %}
    {% include('components/buttons/button-red.html.twig') with {
        'url': path('group_leave', {'groupId': group.id}),
        'title': 'Leave group'
    } %}
{% else %}
    <!-- User is not in group -->
    <!-- If group is public, user can join group -->
    {% if(group.type == constant('PUBLIC_GROUP_TYPE', group)) %}
        {% include('components/buttons/button-blue.html.twig') with {
            'url': path('group_join', {'groupId': group.id}),
            'title': 'Join group'
        } %}
    {% else %}
        <!-- Group is private -->
        <!-- If user has already requested access to group, use can cancel request -->
        {% if(group.isRequested(app.user)) %}
            {% include('components/buttons/button-red.html.twig') with{
                url: path('group_request_cancel', {'groupId': group.id}),
                title: 'Cancel Request'
            }%}
        {% else %}
            <!-- If user hasn't requested access, user can make access request-->
            {% include('components/buttons/button-blue.html.twig') with {
                url: path('group_request_create', {'groupId': group.id}),
                title: 'Join group'
            } %}
        {% endif %}
    {% endif %}
{% endif %}
