{% extends 'base.html.twig' %}

{% block title %}
    {{ 'Friends' }}
{% endblock %}

{% block body %}
    <div class="grid grid-cols-12 gap-4">
        {% if(app.user) %}
            <div class="col-span-2 col-start-2">
                {% include 'components/profile/navigation.html.twig' %}
            </div>
        {% endif %}
        <div class="col-span-8 bg-indigo-300 rounded ">
            <div class="grid grid-cols-3 gap-4">
                <div class="col-span-1">
                    <div class=" text-center m-4 text-xl">
                        {{ 'My Friends' }}
                    </div>
                    <div class="m-4">
                        {% for friendship in  profile.friendships %}
                        <div class="grid grid-cols-4">
                            <div class="col-span-1">
                                <a href="{{ path('profile_index', {'profileId': friendship.friend.id}) }}">
                                    <img src="{{ friendship.friend.profileImageUrl }}">
                                </a>
                            </div>
                            <div class="col-span-3 text-center">
                                <a href="{{ path('profile_index', {'profileId': friendship.friend.id}) }}">
                                    <p>{{ friendship.friend.username }}</p>
                                </a>
                            </div>
                            <div class="col-span-4 items-center">
                                {% include('components/buttons/remove-friend-button.html.twig') with {
                                    'button_url': path('friendship_delete', {'friendshipId': friendship.id})
                                } %}
                            </div>
                        </div>
                        {% endfor %}
                    </div>
                </div>
                <div class="col-span-1">
                    <div class=" text-center m-4 text-xl">
                        {{ 'Requests made by me' }}
                    </div>
                    <div class="m-4">
                        {% for request in profile.requestsMadeByProfile %}
                            <div class="grid grid-cols-4">
                                <div class="col-span-1">
                                    <a href="{{ path('profile_index', {'profileId': request.requestee.id}) }}">
                                        <img src="{{ request.requestee.profileImageUrl }}">
                                    </a>
                                </div>
                                <div class="col-span-3 text-center">
                                    <a href="{{ path('profile_index', {'profileId': request.requestee.id}) }}">
                                        <p>{{ request.requestee.username }}</p>
                                    </a>
                                </div>
                                <div class="col-span-4 items-center">
                                    {% include('components/buttons/cancel-friendship-request.html.twig') with {
                                        'button_url': path('friendship_request_delete', {'requestId': request.id})
                                    } %}
                                </div>
                            </div>
                        {% endfor %}
                    </div>
                </div>
                <div class="col-span-1">
                    <div class=" text-center m-4 text-xl">
                        {{ 'Requests made to me' }}
                    </div>
                    <div class="m-4">
                        {% for request in profile.requestsMadeToProfile %}
                            <div class="grid grid-cols-4">
                                <div class="col-span-1">
                                    <a href="{{ path('profile_index', {'profileId': request.requester.id}) }}">
                                        <img src="{{ request.requester.profileImageUrl }}">
                                    </a>
                                </div>
                                <div class="col-span-3 text-center">
                                    <a href="{{ path('profile_index', {'profileId': request.requester.id}) }}">
                                        <p>{{ request.requester.username }}</p>
                                    </a>
                                </div>
                                <div class="col-span-2 items-center">
                                    {% include('components/buttons/accept-friendship-request.html.twig') with {
                                        'button_url': path('friendship_create', {'profileId': request.requester.id}) } %}
                                </div>
                                <div class="col-span-2 items-center">
                                    {% include('components/buttons/decline-friendship-request.html.twig') with {
                                        'button_url': path('friendship_request_delete', {'requestId': request.id})
                                    } %}
                                </div>
                            </div>
                        {% endfor %}
                    </div>
                </div>
            </div>
        </div>
    </div>
{% endblock %}
